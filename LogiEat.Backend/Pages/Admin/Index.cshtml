@page
@model LogiEat.Backend.Pages.Admin.IndexModel
@{
    ViewData["Title"] = "Panel de Control";
}

<h1>Pedidos Pendientes</h1>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th># Pedido</th>
                <th>Cliente</th>
                <th>Fecha</th>
                <th>Total</th>
                <th>Detalles</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.PedidosPendientes)
            {
                <tr>
                    <td>@item.IdPedido</td>
                    <td>@item.Usuario?.FullName</td>
                    <td>@item.FechaPedido.ToString("g")</td>
                    <td>$@item.Total</td>
                    <td>
                        <ul>
                            @foreach (var detalle in item.Detalles)
                            {
                                <li>@detalle.Cantidad x @detalle.NombreProductoSnapshot</li>
                            }
                        </ul>
                    </td>
                    <td>
                        <form method="post" asp-page-handler="Aprobar" asp-route-id="@item.IdPedido">
                            <button class="btn btn-success btn-sm">Aprobar</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    @if (Model.PedidosPendientes.Count == 0)
    {
        <div class="alert alert-info">No hay pedidos pendientes por ahora.</div>
    }
</div>