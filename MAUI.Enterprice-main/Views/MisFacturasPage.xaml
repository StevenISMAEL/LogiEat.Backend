<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LogiEat.Mobile.Views.MisFacturasPage"
             Title="Comprobantes ElectrÃ³nicos"
             BackgroundColor="#f0f2f5">

    <RefreshView x:Name="Refresher" Refreshing="OnRefreshing">
        <CollectionView x:Name="CvFacturas" Margin="10" SelectionMode="None">
            <CollectionView.EmptyView>
                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                    <Label Text="ðŸ“­" FontSize="50" HorizontalOptions="Center"/>
                    <Label Text="No tienes facturas registradas aÃºn." TextColor="Gray"/>
                </VerticalStackLayout>
            </CollectionView.EmptyView>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,5" Padding="15" CornerRadius="10" BackgroundColor="White" HasShadow="True">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnFacturaTapped" CommandParameter="{Binding IdFactura}"/>
                        </Frame.GestureRecognizers>

                        <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="*, Auto">
                            <Label Grid.Row="0" Grid.Column="0" Text="{Binding IdFactura, StringFormat='Factura #{0:D6}'}" FontAttributes="Bold" TextColor="#333" FontSize="16"/>
                            <Label Grid.Row="0" Grid.Column="1" Text="{Binding Estado}" TextColor="{Binding ColorEstado}" FontAttributes="Bold" FontSize="12"/>

                            <Label Grid.Row="1" Grid.Column="0" Text="{Binding Fecha}" TextColor="Gray" FontSize="12"/>
                            <Label Grid.Row="1" Grid.Column="1" Text="{Binding Origen}" TextColor="#007bff" FontSize="12" HorizontalOptions="End"/>

                            <Label Grid.Row="2" Grid.Column="0" Text="{Binding Ruc, StringFormat='RUC: {0}'}" TextColor="#555" FontSize="12" Margin="0,5,0,0"/>
                            <Label Grid.Row="2" Grid.Column="1" Text="{Binding Total, StringFormat='${0:F2}'}" FontAttributes="Bold" TextColor="Black" FontSize="18" VerticalOptions="End"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </RefreshView>
</ContentPage>